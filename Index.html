<html>
	<head>
		<link rel="stylesheet" href="style/style.css">
		<script src="js/pixi.min.js"></script>
		<script type="text/javascript">
			let app;
			let graphics;
			var isDrawing = false;
			var x = 0;
			var y = 0;
			window.onload = function(){
				
				var canvasContainer = document.getElementById("areaCanvasContainer");
				//Create a Pixi Application
				app = new PIXI.Application({ 
					width: 600,
					height: 500,
					antialias: true,
					transparent: false,
					resolution: 1,
					forceCanvas: true,
					backgroundColor: 0xFFFFFF
				});
				canvasContainer.appendChild(app.view);
				
				//app.view.addEventListener("touchstart", function(e) {    e.preventDefault();},{passive: false});
				//app.view.addEventListener("touchmove", function(e) {    e.preventDefault();},{passive: false});
				
				graphics = new PIXI.Graphics();
				graphics.interactive = true;
				graphics.buttonMode = true;
				
				graphics.on("pointerdown", mousedown);
				graphics.on("pointermove", mousemove);
				graphics.on("pointerup", mouseup);
				graphics.on("pointerupoutside", mouseup);
				graphics.on("pointerover", test);
				
				/*graphics.lineStyle(1, 0x000000);
				graphics.moveTo(0,0);	
				graphics.lineTo(100,100);*/
				
				app.stage.addChild(graphics);
				
				app.ticker.add(testloop);
			}
			
			function testloop(delta){
				
			}
			
			function test (e){
				console.log("over");
			}
			
			function mousedown(e) {
				console.log("Down");
				x = e.offsetX;
				y = e.offsetY;
				isDrawing = true;
			}
			
			function mousemove(e) {
				if (isDrawing === true) {
					drawLine(context, x, y, e.offsetX, e.offsetY);
					x = e.offsetX;
					y = e.offsetY;
				}
			}
			
			function mouseup(e) {
				if (isDrawing === true) {
					drawLine(context, x, y, e.offsetX, e.offsetY);
					x = 0;
					y = 0;
					isDrawing = false;
				}
			}
			
			function drawLine(context, x1, y1, x2, y2) {
				//graphics.beginPath();
				graphics.lineStyle(1, 0x000000);
				graphics.moveTo(x1, y1);
				graphics.lineTo(x2, y2);
				//graphics.stroke();
				//graphics.closePath();
			}
		</script>
	</head>
	
	<body>
		<div id="areaMain">
			<h1>DrawV</h1>
			<div id="areaCanvasContainer">
				<!--<canvas id="canvasDraw" width="600" height="500" />-->
			</div>
			<div id="areaControls">
				<button>Test</button>
			</div>
		</div>
	</body>
</html>